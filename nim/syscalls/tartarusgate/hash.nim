import winim

#[ sdmb hashing algorithm ]#

proc hashStrA*(s: cstring): uint32 {.inline.} =
  var hash: uint32 = 0
  for i in s:
    hash = ord(i).uint32 + (hash shl 6) + (hash shl 16) - hash
  return hash

proc hashStrW*(s: PWSTR): uint32  =
  var 
    hash: uint32 = 0
    pS = cast[ptr UncheckedArray[WCHAR]](s)
    idx: int = 0
  while pS[idx] != 0:
    hash = ord(pS[idx]).uint32 + (hash shl 6) + (hash shl 16) - hash
    idx.inc
  return hash